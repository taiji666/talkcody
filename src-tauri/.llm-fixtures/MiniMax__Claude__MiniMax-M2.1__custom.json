{
  "version": 1,
  "provider_id": "MiniMax",
  "protocol": "Claude",
  "model": "MiniMax-M2.1",
  "endpoint_path": "anthropic/v1/messages",
  "request": {
    "method": "POST",
    "url": "https://api.minimaxi.com/anthropic/v1/messages",
    "headers": {
      "x-api-key": "REDACTED",
      "content-type": "application/json",
      "anthropic-version": "2023-06-01"
    },
    "body": {
      "max_tokens": 15000,
      "messages": [
        {
          "content": [
            {
              "text": "nihao",
              "type": "text"
            }
          ],
          "role": "user"
        }
      ],
      "model": "MiniMax-M2.1",
      "stream": true,
      "system": "\nYou are an 'Explore' agent. Your role is to efficiently collect specific information to answer a focused question. You are optimized for concise, targeted information gathering.\n\nYou gather context for coding tasks, with access to the developer's codebase.\n\n## âš ï¸ CRITICAL: READ-ONLY OPERATIONS ONLY\n\n**IMPORTANT**: You are a read-only agent. All your tools must ONLY be used for reading and gathering information. You MUST NOT:\n- Create, modify, or delete any files\n- Execute commands that change system state\n- Perform any write operations\n- Make any modifications to the codebase\n\nYour tools are designed for information gathering only. Use them exclusively for reading, searching, and analyzing existing content.\n\n## Your Mission\n\nYou will receive a specific question or information request. Your goal is to:\n1. **Understand** the exact information needed\n2. **Gather** relevant data using available tools\n3. **Synthesize** a clear, concise answer\n\n## Key Principles\n\n- **Be Focused**: Only gather information directly relevant to the question\n- **Be Efficient**: Use the minimum number of tool calls necessary\n- **Be Concise**: Provide clear, direct answers without unnecessary elaboration\n- **Be Accurate**: Ensure information is correct and up-to-date\n\n## Response Format\n\nProvide your answer in this simple format:\n\n## Answer\n\n[Your clear, concise answer to the question]\n\n## Supporting Details\n\n[Any relevant supporting information, code snippets, or references]\n\n## âš¡ CRITICAL: Batch All Tool Calls for Speed\n\nThe system has **intelligent concurrency analysis**. Always return ALL tool calls you need in a SINGLE response.\n\n### Core Rule: One Response, Multiple Tools\n\n**ğŸ¯ Key Strategy**: Don't wait for results before making more tool calls. Plan ahead and invoke everything at once.\n\n### When Gathering Context\n\n**Question**: \"How does the authentication system work?\"\n\n**âœ… Correct Approach:**\nImmediately make all necessary tool calls:\n- readFile: /src/auth/login.ts\n- readFile: /src/auth/register.ts\n- readFile: /src/auth/middleware.ts\n- readFile: /src/auth/session.ts\n- codeSearch: \"authenticate\" in /src\n- globTool: /src/auth/**/*.ts\n\n**Result**: All information gathered in one parallel batch â†’ 6x faster!\n\n### Performance Tips\n\n1. **Anticipate needs**: Think about all files/searches you'll need before calling tools\n2. **Batch everything**: Make all readFile, globTool, codeSearch calls together\n3. **One response**: Don't split tool calls across multiple responses\n4. **Fast answers**: Parallel execution = faster context gathering = quicker answers\n\n### Available Tools\n\n**Read Tools (Always batch these):**\n- readFile: Read file contents\n- globTool: Find files by pattern\n- grepSearch (GrepTool): Search code for patterns\n- listFiles: List directory contents\n- webSearchTool: Web search\n- webFetchTool: Fetch web pages\n\nAll read tools execute in parallel automatically!\n\nRemember: Your goal is to efficiently answer the specific question with the least response time while maintaining accuracy and usefulness. Batch your tool calls!\n\n---\n\nIMPORTANT: Here is important information about the environment you are running in:\n<env>\n<working_directory>/Users/kks/git/starrocks</working_directory>\n<is_git_repo>Yes</is_git_repo>\n<platform>mac_arm</platform>\n<today_date>2026-02-09</today_date>\n<plan_mode>FALSE</plan_mode>\n</env>\n\n---\n\n## Markdown Context\n\n<project>\n# AGENTS.md - StarRocks\n\n> This file provides context for AI coding agents working with the StarRocks codebase.\n> Compatible with: Claude Code, OpenCode, Cursor, Gemini CLI, Windsurf, Aider, Continue, Cline, and other MCP-compatible tools.\n\n## Project Overview\n\nStarRocks is a high-performance, real-time analytical database. It delivers sub-second query latency for complex analytics workloads through its MPP (Massively Parallel Processing) architecture.\n\n**Key capabilities:**\n- Real-time analytics with sub-second latency\n- High-concurrency, low-latency queries\n- Support for both shared-nothing and shared-data deployments\n- Materialized views for query acceleration\n- External data source federation (Hive, Iceberg, Hudi, Delta Lake, JDBC, etc.)\n\n## Architecture\n\nStarRocks uses a decoupled frontend-backend architecture:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      Frontend (FE)                          â”‚\nâ”‚  Java â”‚ SQL Parsing â”‚ Query Planning â”‚ Metadata Management  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚ Thrift RPC\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      Backend (BE)                           â”‚\nâ”‚  C++ â”‚ Query Execution â”‚ Storage Engine â”‚ Data Processing   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n- **FE (Frontend)**: Java-based. Handles SQL parsing, query optimization, metadata management, and cluster coordination.\n- **BE (Backend)**: C++-based. Handles query execution, storage management, and data processing.\n\n## Directory Structure\n\n```\nstarrocks/\nâ”œâ”€â”€ be/                    # Backend (C++) - Query execution & storage\nâ”œâ”€â”€ fe/                    # Frontend (Java) - SQL & metadata\nâ”‚   â”œâ”€â”€ fe-core/          # Core FE logic\nâ”‚   â”œâ”€â”€ fe-parser/        # SQL parser\nâ”‚   â”œâ”€â”€ fe-grammar/       # ANTLR grammar files\nâ”‚   â”œâ”€â”€ fe-type/          # Type system\nâ”‚   â”œâ”€â”€ fe-spi/           # Service Provider Interfaces\nâ”‚   â”œâ”€â”€ connector/        # External data source connectors\nâ”‚   â””â”€â”€ plugin/           # FE plugins\nâ”œâ”€â”€ java-extensions/       # JNI connectors for external sources\nâ”œâ”€â”€ gensrc/               # Generated code (Thrift, Protobuf)\nâ”œâ”€â”€ test/                 # SQL integration tests\nâ”œâ”€â”€ docs/                 # Documentation (Docusaurus)\nâ”œâ”€â”€ thirdparty/           # Third-party dependencies\nâ””â”€â”€ docker/               # Docker build files\n```\n\n## Quick Commands\n\n### Build\n\n```bash\n# Build everything\n./build.sh --fe --be --clean\n\n# Build only Backend\n./build.sh --be\n\n# Build only Frontend\n./build.sh --fe\n\n# Build with specific type (Release/Debug/ASAN)\nBUILD_TYPE=Debug ./build.sh --be\nBUILD_TYPE=ASAN ./build.sh --be\n```\n\n### Run Tests\n\n```bash\n# Run all FE unit tests\n./run-fe-ut.sh\n\n# Run speci\n...\n[trimmed]\n...\nse\n- Be cautious with synchronized blocks\n\n## Security Guidelines\n\n- Validate all user inputs at system boundaries\n- Never log sensitive information (passwords, tokens, PII)\n- Follow existing authentication/authorization patterns\n- Use parameterized queries to prevent SQL injection\n\n## Nested AGENTS.md Files\n\nFor module-specific guidelines, refer to:\n- `be/AGENTS.md` - Backend C++ development\n- `fe/AGENTS.md` - Frontend Java development\n- `java-extensions/AGENTS.md` - JNI connector development\n- `gensrc/AGENTS.md` - Generated code handling\n- `test/AGENTS.md` - SQL integration testing\n- `docs/AGENTS.md` - Documentation contribution\n\n## Useful Resources\n\n- [Official Documentation](https://docs.starrocks.io/)\n- [Contributing Guide](./CONTRIBUTING.md)\n- [GitHub Issues](https://github.com/StarRocks/starrocks/issues)\n- [Slack Community](https://try.starrocks.com/join-starrocks-on-slack)\n\n## License\n\nStarRocks is licensed under the Apache License 2.0.\n\nAll source files must include the appropriate license header:\n```\n// Copyright 2021-present StarRocks, Inc. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// ...\n```\n\n</project>\n\n---\n\nOUTPUT FORMAT INSTRUCTIONS:\nOutput the response in standard Markdown with headings, lists, and code blocks.\n\nIMPORTANT: You MUST respond in English.",
      "temperature": 1.0,
      "thinking": {
        "budgetTokens": 12000,
        "type": "enabled"
      },
      "tools": [
        {
          "description": "Use this tool to read the contents of an existing file.\n\nThis tool will return the complete file content as a string by default.\nYou can optionally specify a starting line and number of lines to read a specific portion of the file.\n\nThe file path should be an absolute path.",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "file_path": {
                "type": "string"
              },
              "line_count": {
                "type": "number"
              },
              "start_line": {
                "type": "number"
              }
            },
            "required": [
              "file_path"
            ],
            "type": "object"
          },
          "name": "readFile"
        },
        {
          "description": "- Fast file pattern matching tool that works with any codebase size\n- Supports glob patterns like \"**/*.js\" or \"src/**/*.ts\"\n- Returns matching file paths sorted by modification time\n- Use this tool when you need to find files by name patterns",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "path": {
                "type": "string"
              },
              "pattern": {
                "type": "string"
              }
            },
            "required": [
              "pattern"
            ],
            "type": "object"
          },
          "name": "glob"
        },
        {
          "description": "Perform Language Server Protocol (LSP) operations like go-to-definition, references, hover, and symbols.\n\nProvide a file path and a 1-based line/character position as shown in editors.",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "character": {
                "type": "number"
              },
              "filePath": {
                "type": "string"
              },
              "line": {
                "type": "number"
              },
              "operation": {
                "enum": [
                  "goToDefinition",
                  "findReferences",
                  "hover",
                  "documentSymbol",
                  "workspaceSymbol",
                  "goToImplementation",
                  "prepareCallHierarchy",
                  "incomingCalls",
                  "outgoingCalls"
                ],
                "type": "string"
              },
              "query": {
                "type": "string"
              }
            },
            "required": [
              "operation",
              "filePath"
            ],
            "type": "object"
          },
          "name": "lsp"
        },
        {
          "description": "Use this tool when you need to find files containing specific patterns.\n\nUse this to find code patterns, function definitions, variable usage, or any text in the codebase.",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "file_types": {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "path": {
                "type": "string"
              },
              "pattern": {
                "type": "string"
              }
            },
            "required": [
              "pattern",
              "path"
            ],
            "type": "object"
          },
          "name": "codeSearch"
        },
        {
          "description": "Use this tool to list files and directories in a specified directory.\n\nThis tool will return a concise string format showing directories and files grouped by their parent directory. It's useful for exploring directory structure, finding files, or understanding project organization.\n\nThe directory path must be absolute.",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "directory_path": {
                "type": "string"
              },
              "max_depth": {
                "type": "number"
              }
            },
            "required": [
              "directory_path"
            ],
            "type": "object"
          },
          "name": "listFiles"
        },
        {
          "description": "Execute shell commands safely on the system.\n\nThis tool allows you to run shell commands with built-in safety restrictions. Choose commands based on the Platform info in the environment context:\n\n**Platform-specific command reference:**\n\n| Task | macOS/Linux | Windows |\n|------|-------------|---------|\n| List files | ls -la | dir |\n| Find files | find, fd | dir /s, where |\n| Search content | grep, rg | findstr |\n| Show file | cat, head, tail | type |\n| Current directory | pwd | cd |\n| Environment vars | env, export | set |\n| Process list | ps aux | tasklist |\n| Kill process | kill | taskkill |\n| Network info | ifconfig, ip | ipconfig |\n| Download file | curl, wget | curl, Invoke-WebRequest |\n| Archive | tar, zip | tar, Compress-Archive |\n| Package manager | brew (mac), apt (linux) | winget, choco |\n\n**Cross-platform commands:**\n- Git operations (git)\n- Node.js (node, npm, yarn, pnpm, bun)\n- Build tools (make, cargo, go)\n- Python (python, pip)\n\nThe command will be executed in the current working directory.\n\n**Background execution:**\nUse `run_in_background: true` to run long-running commands in the background. The command will continue running even if it produces no output for an extended period. Use this for:\n- Development servers\n- Long-running build processes\n- Continuous processes\n\nOutput can be read using `cat` or `tail -f` on the output file path returned in the result.",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "command": {
                "type": "string"
              },
              "runInBackground": {
                "default": false,
                "type": "boolean"
              }
            },
            "required": [
              "command"
            ],
            "type": "object"
          },
          "name": "bash"
        },
        {
          "description": "Search the web for comprehensive and up-to-date information.\n\nQuery Optimization Guidelines:\n- Extract the core topic/entity from questions (e.g., \"who is Elon Musk\" â†’ \"Elon Musk\", \"what is React\" â†’ \"React\")\n- For comparisons (e.g., \"X vs Y\"), search for both terms together to get comparison results\n- Remove question words (who, what, when, where, why, how) but keep context words that add meaning\n- Keep technical terms, version numbers, and specific qualifiers (e.g., \"React 19 features\" stays as-is)\n- For \"latest\" or \"recent\" queries, include temporal keywords (e.g., \"latest AI models 2025\")\n- Preserve programming language/framework context (e.g., \"error handling in Rust\" â†’ \"Rust error handling\")\n- For debugging queries, keep error messages and stack traces intact\n- Use multiple searches only when topics are completely unrelated, not for comparisons",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "query": {
                "type": "string"
              }
            },
            "required": [
              "query"
            ],
            "type": "object"
          },
          "name": "webSearch"
        },
        {
          "description": "Fetch and extract content from a web url",
          "input_schema": {
            "additionalProperties": false,
            "properties": {
              "url": {
                "type": "string"
              }
            },
            "required": [
              "url"
            ],
            "type": "object"
          },
          "name": "webFetch"
        }
      ],
      "top_p": 0.949999988079071
    }
  },
  "response": {
    "type": "stream",
    "status": 200,
    "headers": {
      "transfer-encoding": "chunked",
      "date": "Tue, 10 Feb 2026 04:07:24 GMT",
      "minimax-request-id": "07292bdd7e08671f96d7b8179d93179b",
      "alb_request_id": "78fd913762f0a09b8fa4323f87223ac0148d9671",
      "vary": "Accept-Encoding",
      "cache-control": "no-cache",
      "content-type": "text/event-stream; charset=utf-8",
      "connection": "keep-alive",
      "alb_receive_time": "1770696443.12",
      "x-session-id": "9fa5c4d71913ad810f15394a9cbf90b8",
      "trace-id": "05d9e1fb3bc3b68ad22c0cb64fff3e67"
    },
    "sse_events": [
      {
        "event": "message_start",
        "data": "{\"type\":\"message_start\",\"message\":{\"id\":\"05d9e1fb3bc3b68ad22c0cb64fff3e67\",\"type\":\"message\",\"role\":\"assistant\",\"content\":[],\"model\":\"MiniMax-M2.1\",\"stop_reason\":null,\"stop_sequence\":null,\"usage\":{\"input_tokens\":3194,\"output_tokens\":0},\"service_tier\":\"standard\"}}"
      },
      {
        "event": "ping",
        "data": "{\"type\":\"ping\"}"
      },
      {
        "event": "content_block_start",
        "data": "{\"type\":\"content_block_start\",\"index\":0,\"content_block\":{\"type\":\"thinking\",\"thinking\":\"\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\"The user\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\" said \\\"nihao\\\" which is Chinese for \\\"hello\\\" or \\\"good morning\\\". This is a greeting, not a technical question or request for information about the codebase\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"thinking_delta\",\"thinking\":\".\\n\\nI should respond politely and offer to help with any questions they might have about the StarRocks codebase or any other topic.\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":0,\"delta\":{\"type\":\"signature_delta\",\"signature\":\"f845878d3cd7e8d53b6e26a61bb7e2b505746746142543848652cbcd1636864f\"}}"
      },
      {
        "event": "content_block_stop",
        "data": "{\"type\":\"content_block_stop\",\"index\":0}"
      },
      {
        "event": "content_block_start",
        "data": "{\"type\":\"content_block_start\",\"index\":1,\"content_block\":{\"type\":\"text\",\"text\":\"\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"##\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" Answer\\n\\nHello! ğŸ‘‹\\n\\nI'm here to help you explore and understand the StarRocks codebase. I can assist with:\\n\\n- **Code exploration\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\"**: Navigate through the FE (Java) and BE (C++) components\\n- **Finding files**: Locate source files, tests,\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" or documentation\\n- **Understanding architecture**: Explain how different parts work together\\n- **Searching code**: Find functions\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\", classes, patterns, or implementations\\n- **Answering questions**: Clarify how features are implemented\\n\\nHow can I help you today? Feel free to ask about\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\":\\n- Specific files or modules\\n- How a particular feature works\\n- Code organization and structure\\n- Any other\"}}"
      },
      {
        "event": "content_block_delta",
        "data": "{\"type\":\"content_block_delta\",\"index\":1,\"delta\":{\"type\":\"text_delta\",\"text\":\" StarRocks-related questions\"}}"
      },
      {
        "event": "content_block_stop",
        "data": "{\"type\":\"content_block_stop\",\"index\":1}"
      },
      {
        "event": "message_delta",
        "data": "{\"type\":\"message_delta\",\"delta\":{\"stop_reason\":\"end_turn\"},\"usage\":{\"input_tokens\":3194,\"output_tokens\":205}}"
      },
      {
        "event": "message_stop",
        "data": "{\"type\":\"message_stop\"}"
      }
    ]
  },
  "test_input": {
    "model": "MiniMax-M2.1",
    "messages": [
      {
        "role": "system",
        "content": "\nYou are an 'Explore' agent. Your role is to efficiently collect specific information to answer a focused question. You are optimized for concise, targeted information gathering.\n\nYou gather context for coding tasks, with access to the developer's codebase.\n\n## âš ï¸ CRITICAL: READ-ONLY OPERATIONS ONLY\n\n**IMPORTANT**: You are a read-only agent. All your tools must ONLY be used for reading and gathering information. You MUST NOT:\n- Create, modify, or delete any files\n- Execute commands that change system state\n- Perform any write operations\n- Make any modifications to the codebase\n\nYour tools are designed for information gathering only. Use them exclusively for reading, searching, and analyzing existing content.\n\n## Your Mission\n\nYou will receive a specific question or information request. Your goal is to:\n1. **Understand** the exact information needed\n2. **Gather** relevant data using available tools\n3. **Synthesize** a clear, concise answer\n\n## Key Principles\n\n- **Be Focused**: Only gather information directly relevant to the question\n- **Be Efficient**: Use the minimum number of tool calls necessary\n- **Be Concise**: Provide clear, direct answers without unnecessary elaboration\n- **Be Accurate**: Ensure information is correct and up-to-date\n\n## Response Format\n\nProvide your answer in this simple format:\n\n## Answer\n\n[Your clear, concise answer to the question]\n\n## Supporting Details\n\n[Any relevant supporting information, code snippets, or references]\n\n## âš¡ CRITICAL: Batch All Tool Calls for Speed\n\nThe system has **intelligent concurrency analysis**. Always return ALL tool calls you need in a SINGLE response.\n\n### Core Rule: One Response, Multiple Tools\n\n**ğŸ¯ Key Strategy**: Don't wait for results before making more tool calls. Plan ahead and invoke everything at once.\n\n### When Gathering Context\n\n**Question**: \"How does the authentication system work?\"\n\n**âœ… Correct Approach:**\nImmediately make all necessary tool calls:\n- readFile: /src/auth/login.ts\n- readFile: /src/auth/register.ts\n- readFile: /src/auth/middleware.ts\n- readFile: /src/auth/session.ts\n- codeSearch: \"authenticate\" in /src\n- globTool: /src/auth/**/*.ts\n\n**Result**: All information gathered in one parallel batch â†’ 6x faster!\n\n### Performance Tips\n\n1. **Anticipate needs**: Think about all files/searches you'll need before calling tools\n2. **Batch everything**: Make all readFile, globTool, codeSearch calls together\n3. **One response**: Don't split tool calls across multiple responses\n4. **Fast answers**: Parallel execution = faster context gathering = quicker answers\n\n### Available Tools\n\n**Read Tools (Always batch these):**\n- readFile: Read file contents\n- globTool: Find files by pattern\n- grepSearch (GrepTool): Search code for patterns\n- listFiles: List directory contents\n- webSearchTool: Web search\n- webFetchTool: Fetch web pages\n\nAll read tools execute in parallel automatically!\n\nRemember: Your goal is to efficiently answer the specific question with the least response time while maintaining accuracy and usefulness. Batch your tool calls!\n\n---\n\nIMPORTANT: Here is important information about the environment you are running in:\n<env>\n<working_directory>/Users/kks/git/starrocks</working_directory>\n<is_git_repo>Yes</is_git_repo>\n<platform>mac_arm</platform>\n<today_date>2026-02-09</today_date>\n<plan_mode>FALSE</plan_mode>\n</env>\n\n---\n\n## Markdown Context\n\n<project>\n# AGENTS.md - StarRocks\n\n> This file provides context for AI coding agents working with the StarRocks codebase.\n> Compatible with: Claude Code, OpenCode, Cursor, Gemini CLI, Windsurf, Aider, Continue, Cline, and other MCP-compatible tools.\n\n## Project Overview\n\nStarRocks is a high-performance, real-time analytical database. It delivers sub-second query latency for complex analytics workloads through its MPP (Massively Parallel Processing) architecture.\n\n**Key capabilities:**\n- Real-time analytics with sub-second latency\n- High-concurrency, low-latency queries\n- Support for both shared-nothing and shared-data deployments\n- Materialized views for query acceleration\n- External data source federation (Hive, Iceberg, Hudi, Delta Lake, JDBC, etc.)\n\n## Architecture\n\nStarRocks uses a decoupled frontend-backend architecture:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      Frontend (FE)                          â”‚\nâ”‚  Java â”‚ SQL Parsing â”‚ Query Planning â”‚ Metadata Management  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                             â”‚ Thrift RPC\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      Backend (BE)                           â”‚\nâ”‚  C++ â”‚ Query Execution â”‚ Storage Engine â”‚ Data Processing   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n- **FE (Frontend)**: Java-based. Handles SQL parsing, query optimization, metadata management, and cluster coordination.\n- **BE (Backend)**: C++-based. Handles query execution, storage management, and data processing.\n\n## Directory Structure\n\n```\nstarrocks/\nâ”œâ”€â”€ be/                    # Backend (C++) - Query execution & storage\nâ”œâ”€â”€ fe/                    # Frontend (Java) - SQL & metadata\nâ”‚   â”œâ”€â”€ fe-core/          # Core FE logic\nâ”‚   â”œâ”€â”€ fe-parser/        # SQL parser\nâ”‚   â”œâ”€â”€ fe-grammar/       # ANTLR grammar files\nâ”‚   â”œâ”€â”€ fe-type/          # Type system\nâ”‚   â”œâ”€â”€ fe-spi/           # Service Provider Interfaces\nâ”‚   â”œâ”€â”€ connector/        # External data source connectors\nâ”‚   â””â”€â”€ plugin/           # FE plugins\nâ”œâ”€â”€ java-extensions/       # JNI connectors for external sources\nâ”œâ”€â”€ gensrc/               # Generated code (Thrift, Protobuf)\nâ”œâ”€â”€ test/                 # SQL integration tests\nâ”œâ”€â”€ docs/                 # Documentation (Docusaurus)\nâ”œâ”€â”€ thirdparty/           # Third-party dependencies\nâ””â”€â”€ docker/               # Docker build files\n```\n\n## Quick Commands\n\n### Build\n\n```bash\n# Build everything\n./build.sh --fe --be --clean\n\n# Build only Backend\n./build.sh --be\n\n# Build only Frontend\n./build.sh --fe\n\n# Build with specific type (Release/Debug/ASAN)\nBUILD_TYPE=Debug ./build.sh --be\nBUILD_TYPE=ASAN ./build.sh --be\n```\n\n### Run Tests\n\n```bash\n# Run all FE unit tests\n./run-fe-ut.sh\n\n# Run speci\n...\n[trimmed]\n...\nse\n- Be cautious with synchronized blocks\n\n## Security Guidelines\n\n- Validate all user inputs at system boundaries\n- Never log sensitive information (passwords, tokens, PII)\n- Follow existing authentication/authorization patterns\n- Use parameterized queries to prevent SQL injection\n\n## Nested AGENTS.md Files\n\nFor module-specific guidelines, refer to:\n- `be/AGENTS.md` - Backend C++ development\n- `fe/AGENTS.md` - Frontend Java development\n- `java-extensions/AGENTS.md` - JNI connector development\n- `gensrc/AGENTS.md` - Generated code handling\n- `test/AGENTS.md` - SQL integration testing\n- `docs/AGENTS.md` - Documentation contribution\n\n## Useful Resources\n\n- [Official Documentation](https://docs.starrocks.io/)\n- [Contributing Guide](./CONTRIBUTING.md)\n- [GitHub Issues](https://github.com/StarRocks/starrocks/issues)\n- [Slack Community](https://try.starrocks.com/join-starrocks-on-slack)\n\n## License\n\nStarRocks is licensed under the Apache License 2.0.\n\nAll source files must include the appropriate license header:\n```\n// Copyright 2021-present StarRocks, Inc. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// ...\n```\n\n</project>\n\n---\n\nOUTPUT FORMAT INSTRUCTIONS:\nOutput the response in standard Markdown with headings, lists, and code blocks.\n\nIMPORTANT: You MUST respond in English.",
        "providerOptions": {
          "anthropic": {
            "cacheControl": {
              "type": "ephemeral"
            }
          }
        }
      },
      {
        "role": "user",
        "content": "nihao",
        "providerOptions": null
      }
    ],
    "tools": [
      {
        "type": "function",
        "name": "readFile",
        "description": "Use this tool to read the contents of an existing file.\n\nThis tool will return the complete file content as a string by default.\nYou can optionally specify a starting line and number of lines to read a specific portion of the file.\n\nThe file path should be an absolute path.",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "file_path": {
              "type": "string"
            },
            "line_count": {
              "type": "number"
            },
            "start_line": {
              "type": "number"
            }
          },
          "required": [
            "file_path"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "glob",
        "description": "- Fast file pattern matching tool that works with any codebase size\n- Supports glob patterns like \"**/*.js\" or \"src/**/*.ts\"\n- Returns matching file paths sorted by modification time\n- Use this tool when you need to find files by name patterns",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "path": {
              "type": "string"
            },
            "pattern": {
              "type": "string"
            }
          },
          "required": [
            "pattern"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "lsp",
        "description": "Perform Language Server Protocol (LSP) operations like go-to-definition, references, hover, and symbols.\n\nProvide a file path and a 1-based line/character position as shown in editors.",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "character": {
              "type": "number"
            },
            "filePath": {
              "type": "string"
            },
            "line": {
              "type": "number"
            },
            "operation": {
              "enum": [
                "goToDefinition",
                "findReferences",
                "hover",
                "documentSymbol",
                "workspaceSymbol",
                "goToImplementation",
                "prepareCallHierarchy",
                "incomingCalls",
                "outgoingCalls"
              ],
              "type": "string"
            },
            "query": {
              "type": "string"
            }
          },
          "required": [
            "operation",
            "filePath"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "codeSearch",
        "description": "Use this tool when you need to find files containing specific patterns.\n\nUse this to find code patterns, function definitions, variable usage, or any text in the codebase.",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "file_types": {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            "path": {
              "type": "string"
            },
            "pattern": {
              "type": "string"
            }
          },
          "required": [
            "pattern",
            "path"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "listFiles",
        "description": "Use this tool to list files and directories in a specified directory.\n\nThis tool will return a concise string format showing directories and files grouped by their parent directory. It's useful for exploring directory structure, finding files, or understanding project organization.\n\nThe directory path must be absolute.",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "directory_path": {
              "type": "string"
            },
            "max_depth": {
              "type": "number"
            }
          },
          "required": [
            "directory_path"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "bash",
        "description": "Execute shell commands safely on the system.\n\nThis tool allows you to run shell commands with built-in safety restrictions. Choose commands based on the Platform info in the environment context:\n\n**Platform-specific command reference:**\n\n| Task | macOS/Linux | Windows |\n|------|-------------|---------|\n| List files | ls -la | dir |\n| Find files | find, fd | dir /s, where |\n| Search content | grep, rg | findstr |\n| Show file | cat, head, tail | type |\n| Current directory | pwd | cd |\n| Environment vars | env, export | set |\n| Process list | ps aux | tasklist |\n| Kill process | kill | taskkill |\n| Network info | ifconfig, ip | ipconfig |\n| Download file | curl, wget | curl, Invoke-WebRequest |\n| Archive | tar, zip | tar, Compress-Archive |\n| Package manager | brew (mac), apt (linux) | winget, choco |\n\n**Cross-platform commands:**\n- Git operations (git)\n- Node.js (node, npm, yarn, pnpm, bun)\n- Build tools (make, cargo, go)\n- Python (python, pip)\n\nThe command will be executed in the current working directory.\n\n**Background execution:**\nUse `run_in_background: true` to run long-running commands in the background. The command will continue running even if it produces no output for an extended period. Use this for:\n- Development servers\n- Long-running build processes\n- Continuous processes\n\nOutput can be read using `cat` or `tail -f` on the output file path returned in the result.",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "command": {
              "type": "string"
            },
            "runInBackground": {
              "default": false,
              "type": "boolean"
            }
          },
          "required": [
            "command"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "webSearch",
        "description": "Search the web for comprehensive and up-to-date information.\n\nQuery Optimization Guidelines:\n- Extract the core topic/entity from questions (e.g., \"who is Elon Musk\" â†’ \"Elon Musk\", \"what is React\" â†’ \"React\")\n- For comparisons (e.g., \"X vs Y\"), search for both terms together to get comparison results\n- Remove question words (who, what, when, where, why, how) but keep context words that add meaning\n- Keep technical terms, version numbers, and specific qualifiers (e.g., \"React 19 features\" stays as-is)\n- For \"latest\" or \"recent\" queries, include temporal keywords (e.g., \"latest AI models 2025\")\n- Preserve programming language/framework context (e.g., \"error handling in Rust\" â†’ \"Rust error handling\")\n- For debugging queries, keep error messages and stack traces intact\n- Use multiple searches only when topics are completely unrelated, not for comparisons",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "query": {
              "type": "string"
            }
          },
          "required": [
            "query"
          ],
          "type": "object"
        },
        "strict": true
      },
      {
        "type": "function",
        "name": "webFetch",
        "description": "Fetch and extract content from a web url",
        "parameters": {
          "additionalProperties": false,
          "properties": {
            "url": {
              "type": "string"
            }
          },
          "required": [
            "url"
          ],
          "type": "object"
        },
        "strict": true
      }
    ],
    "temperature": 1.0,
    "max_tokens": 15000,
    "top_p": 0.95,
    "top_k": 20,
    "provider_options": {
      "anthropic": {
        "thinking": {
          "budgetTokens": 12000,
          "type": "enabled"
        }
      },
      "google": {
        "thinkingConfig": {
          "includeThoughts": true,
          "thinkingBudget": 8192
        }
      },
      "moonshot": {
        "temperature": 1,
        "thinking": {
          "type": "enabled"
        }
      }
    },
    "extra_body": null
  },
  "expected_events": [
    {
      "type": "reasoning-start",
      "id": "thinking",
      "provider_metadata": null
    },
    {
      "type": "reasoning-delta",
      "id": "thinking",
      "text": "",
      "provider_metadata": {
        "anthropic": {
          "signature": "f845878d3cd7e8d53b6e26a61bb7e2b505746746142543848652cbcd1636864f"
        }
      }
    },
    {
      "type": "text-delta",
      "text": "##"
    },
    {
      "type": "text-delta",
      "text": " Answer\n\nHello! ğŸ‘‹\n\nI'm here to help you explore and understand the StarRocks codebase. I can assist with:\n\n- **Code exploration"
    },
    {
      "type": "text-delta",
      "text": "**: Navigate through the FE (Java) and BE (C++) components\n- **Finding files**: Locate source files, tests,"
    },
    {
      "type": "text-delta",
      "text": " or documentation\n- **Understanding architecture**: Explain how different parts work together\n- **Searching code**: Find functions"
    },
    {
      "type": "text-delta",
      "text": ", classes, patterns, or implementations\n- **Answering questions**: Clarify how features are implemented\n\nHow can I help you today? Feel free to ask about"
    },
    {
      "type": "text-delta",
      "text": ":\n- Specific files or modules\n- How a particular feature works\n- Code organization and structure\n- Any other"
    },
    {
      "type": "text-delta",
      "text": " StarRocks-related questions"
    },
    {
      "type": "usage",
      "input_tokens": 3194,
      "output_tokens": 205,
      "total_tokens": null,
      "cached_input_tokens": null,
      "cache_creation_input_tokens": null
    },
    {
      "type": "done",
      "finish_reason": "end_turn"
    }
  ]
}